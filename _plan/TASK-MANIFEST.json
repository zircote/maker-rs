[
  {
    "id": "STORY-011-01",
    "epic_id": "EPIC-011",
    "epic_title": "Recursive Decomposition Infrastructure",
    "phase": 3,
    "phase_name": "v0.3.0 - Recursive Decomposition",
    "milestone": 1,
    "milestone_name": "Decomposition MVP",
    "story_title": "Decomposition Agent Framework",
    "description": "As a developer, I want a trait-based decomposition framework, so that I can implement domain-specific task splitting strategies.",
    "owner": "Lead Maintainer",
    "priority": "P0",
    "story_points": 8,
    "status": "pending",
    "blocked_by": [],
    "tasks": [
      "Create src/core/decomposition/mod.rs module",
      "Define DecompositionProposal struct with subtasks, composition_fn, metadata",
      "Define Subtask struct with task_id, parent_id, m_value, description, context",
      "Create CompositionFunction enum: Sequential, Parallel, Conditional, Custom",
      "Define DecompositionAgent trait with propose_decomposition() method",
      "Add DecompositionProposalEvent to MakerEvent enum",
      "Implement serde for all new types",
      "Add validation: leaf nodes must have m_value == 1",
      "Write unit tests for serialization round-trip",
      "Write property tests for m=1 enforcement"
    ],
    "acceptance_criteria": [
      "DecompositionAgent trait is object-safe",
      "CompositionFunction supports 4 patterns",
      "Unit tests pass for serialization",
      "Property tests enforce m=1 on leaf nodes"
    ],
    "context_files": [
      "docs/SystemDesignSpecification.txt",
      "src/core/orchestration.rs",
      "src/core/mod.rs"
    ]
  },
  {
    "id": "STORY-011-02",
    "epic_id": "EPIC-011",
    "epic_title": "Recursive Decomposition Infrastructure",
    "phase": 3,
    "phase_name": "v0.3.0 - Recursive Decomposition",
    "milestone": 1,
    "milestone_name": "Decomposition MVP",
    "story_title": "Decomposition Discriminator",
    "description": "As a system, I want to vote on decomposition proposals, so that I select the most reliable task splitting strategy.",
    "owner": "Lead Maintainer",
    "priority": "P0",
    "story_points": 8,
    "status": "pending",
    "blocked_by": ["STORY-011-01"],
    "tasks": [
      "Create src/core/decomposition/discriminator.rs",
      "Implement CandidateMatcher for DecompositionProposal",
      "Create DecompositionDiscriminator struct wrapping VoteRace",
      "Implement vote_on_decomposition() function",
      "Add depth-based k scaling",
      "Emit DecompositionAccepted and DecompositionRejected events",
      "Write integration test: 3 proposals → single winner"
    ],
    "acceptance_criteria": [
      "Uses same voting algorithm as execution voting",
      "Structural matcher handles differently-ordered subtasks",
      "Integration test passes",
      "k-margin scales with depth"
    ],
    "context_files": ["src/core/voting.rs", "src/core/matcher.rs"]
  },
  {
    "id": "STORY-011-03",
    "epic_id": "EPIC-011",
    "epic_title": "Recursive Decomposition Infrastructure",
    "phase": 3,
    "phase_name": "v0.3.0 - Recursive Decomposition",
    "milestone": 1,
    "milestone_name": "Decomposition MVP",
    "story_title": "Problem Solver Agent Interface",
    "description": "As a system, I want to execute atomic subtasks with voting, so that leaf nodes in the decomposition tree are solved reliably.",
    "owner": "Lead Maintainer",
    "priority": "P0",
    "story_points": 8,
    "status": "pending",
    "blocked_by": ["STORY-011-01"],
    "tasks": [
      "Create src/core/decomposition/solver.rs",
      "Refactor TaskOrchestrator to accept decomposition tree",
      "Create LeafNodeExecutor using vote_with_margin()",
      "Create SubtaskResult struct",
      "Implement state passing from parent to child",
      "Add partial failure handling with retries",
      "Write property tests for execution order"
    ],
    "acceptance_criteria": [
      "Leaf nodes always have m=1",
      "State flows correctly",
      "Partial failure recovery works",
      "Property test passes"
    ],
    "context_files": ["src/core/orchestration.rs", "src/core/executor.rs"]
  },
  {
    "id": "STORY-011-04",
    "epic_id": "EPIC-011",
    "epic_title": "Recursive Decomposition Infrastructure",
    "phase": 3,
    "phase_name": "v0.3.0 - Recursive Decomposition",
    "milestone": 2,
    "milestone_name": "Full Recursive Loop",
    "story_title": "Solution Discriminator & Aggregation",
    "description": "As a system, I want to aggregate subtask results using the winning composition function, so that the final output is consistent with the decomposition strategy.",
    "owner": "Lead Maintainer",
    "priority": "P0",
    "story_points": 8,
    "status": "pending",
    "blocked_by": ["STORY-011-02", "STORY-011-03"],
    "tasks": [
      "Create src/core/decomposition/aggregator.rs",
      "Create SolutionDiscriminator for voting on results",
      "Implement compose_results() for each CompositionFunction",
      "Add schema validation for composed results",
      "Handle recursive composition (nested trees)",
      "Emit SolutionComposed event",
      "Write integration test: 3-level deep decomposition"
    ],
    "acceptance_criteria": [
      "Composition respects winning strategy",
      "Nested decomposition works to depth 5+",
      "Full audit trail logged",
      "3-level test passes"
    ],
    "context_files": [
      "src/core/decomposition/discriminator.rs",
      "src/core/decomposition/solver.rs"
    ]
  },
  {
    "id": "STORY-011-05",
    "epic_id": "EPIC-011",
    "epic_title": "Recursive Decomposition Infrastructure",
    "phase": 3,
    "phase_name": "v0.3.0 - Recursive Decomposition",
    "milestone": 2,
    "milestone_name": "Full Recursive Loop",
    "story_title": "Recursive Loop Orchestration",
    "description": "As a user, I want to submit a high-level task and get a reliable result, so that MAKER handles all decomposition and execution automatically.",
    "owner": "Lead Maintainer",
    "priority": "P0",
    "story_points": 13,
    "status": "pending",
    "blocked_by": ["STORY-011-04"],
    "tasks": [
      "Create src/core/decomposition/orchestrator.rs",
      "Create RecursiveOrchestrator struct",
      "Implement execute(task) with full pipeline",
      "Add depth limit (default 10)",
      "Add cycle detection",
      "Add timeout (default 60s)",
      "Support manual decomposition injection",
      "Implement cancellation",
      "Write end-to-end test"
    ],
    "acceptance_criteria": [
      "End-to-end: task → decomposition → execution → result",
      "Manual override works",
      "Timeout cancels cleanly",
      "Depth limit prevents infinite recursion"
    ],
    "context_files": [
      "src/core/decomposition/*",
      "docs/SystemDesignSpecification.txt"
    ]
  },
  {
    "id": "STORY-012-01",
    "epic_id": "EPIC-012",
    "epic_title": "Production Hardening",
    "phase": 3,
    "phase_name": "v0.3.0 - Production Hardening",
    "milestone": 3,
    "milestone_name": "Production CLI",
    "story_title": "Standalone CLI (maker-cli)",
    "description": "As a developer, I want a command-line interface for MAKER operations without MCP.",
    "owner": "Lead Maintainer",
    "priority": "P1",
    "story_points": 8,
    "status": "pending",
    "blocked_by": [],
    "tasks": [
      "Add clap dependency",
      "Create src/bin/maker-cli.rs",
      "Implement vote, validate, calibrate, config subcommands",
      "Add decompose subcommand (after EPIC-011)",
      "Support JSON and text output",
      "Add shell completion generation",
      "Write integration tests"
    ],
    "acceptance_criteria": [
      "Feature parity with MCP tools",
      "--help for all commands",
      "Standard exit codes",
      "Integration tests pass"
    ],
    "context_files": ["src/bin/maker-mcp.rs", "src/mcp/tools/*"]
  },
  {
    "id": "STORY-012-02",
    "epic_id": "EPIC-012",
    "epic_title": "Production Hardening",
    "phase": 3,
    "phase_name": "v0.3.0 - Production Hardening",
    "milestone": 3,
    "milestone_name": "Production CLI",
    "story_title": "Async Executor Integration",
    "description": "As a developer, I want async voting execution, so that parallel sampling is efficient in async contexts.",
    "owner": "Lead Maintainer",
    "priority": "P1",
    "story_points": 8,
    "status": "pending",
    "blocked_by": [],
    "tasks": [
      "Create src/core/async_executor.rs",
      "Create AsyncVotingExecutor",
      "Implement vote_with_margin_async()",
      "Add cancellation handling",
      "Add connection pooling",
      "Create sync/async benchmark",
      "Write property tests for parity"
    ],
    "acceptance_criteria": [
      "Same results as sync version",
      "Parallel latency < 2× sequential",
      "Graceful cancellation",
      "Benchmarks show improvement"
    ],
    "context_files": ["src/core/executor.rs", "src/llm/sampler.rs"]
  },
  {
    "id": "STORY-012-03",
    "epic_id": "EPIC-012",
    "epic_title": "Production Hardening",
    "phase": 3,
    "phase_name": "v0.3.0 - Production Hardening",
    "milestone": 4,
    "milestone_name": "Claude Code Ready",
    "story_title": "Claude Code Integration Testing",
    "description": "As a user, I want MAKER to work reliably with Claude Code, so that I can use voting in my daily development workflow.",
    "owner": "Lead Maintainer",
    "priority": "P1",
    "story_points": 5,
    "status": "pending",
    "blocked_by": ["STORY-012-01"],
    "tasks": [
      "Create tests/mcp_integration.rs harness",
      "Write tests for all MCP tools",
      "Test configuration persistence",
      "Test ensemble and adaptive k",
      "Create docs/CLAUDE-CODE-SETUP.md",
      "Add to CI"
    ],
    "acceptance_criteria": [
      "All tools work via stdio",
      "Config persists correctly",
      "Ensemble metrics reported",
      "CI tests pass"
    ],
    "context_files": ["src/bin/maker-mcp.rs", "src/mcp/server.rs"]
  },
  {
    "id": "STORY-012-04",
    "epic_id": "EPIC-012",
    "epic_title": "Production Hardening",
    "phase": 3,
    "phase_name": "v0.3.0 - Production Hardening",
    "milestone": 3,
    "milestone_name": "Production CLI",
    "story_title": "Operational Tooling",
    "description": "As an operator, I want health checks and metrics, so that I can monitor MAKER in production.",
    "owner": "Lead Maintainer",
    "priority": "P1",
    "story_points": 5,
    "status": "pending",
    "blocked_by": [],
    "tasks": [
      "Add prometheus feature flag",
      "Create src/mcp/health.rs with HealthStatus",
      "Implement /health MCP resource",
      "Create Prometheus metrics (behind feature flag)",
      "Add --validate-config flag",
      "Implement graceful shutdown"
    ],
    "acceptance_criteria": [
      "Health check returns status/version/uptime",
      "Prometheus metrics work",
      "Invalid config fails fast",
      "Graceful shutdown works"
    ],
    "context_files": ["src/mcp/server.rs", "src/events/observers/metrics.rs"]
  },
  {
    "id": "STORY-013-01",
    "epic_id": "EPIC-013",
    "epic_title": "Extended Domain Support",
    "phase": 3,
    "phase_name": "v0.3.0 - Extended Domain Support",
    "milestone": 5,
    "milestone_name": "Domain Decomposers",
    "story_title": "Coding Domain Decomposer",
    "description": "As a developer, I want AST-based code decomposition, so that coding tasks are split into syntactically valid atomic operations.",
    "owner": "Lead Maintainer",
    "priority": "P2",
    "story_points": 8,
    "status": "pending",
    "blocked_by": ["STORY-011-05"],
    "tasks": [
      "Create src/core/decomposition/domains/coding.rs",
      "Implement CodingDecomposer with tree-sitter",
      "Add function/block/line-level strategies",
      "Add syntax validation red-flags",
      "Support Rust, Python, JavaScript",
      "Write integration test"
    ],
    "acceptance_criteria": [
      "Respects syntactic boundaries",
      "Subtasks are m=1 operations",
      "Syntax errors red-flagged",
      "Integration test passes"
    ],
    "context_files": [
      "src/core/decomposition/mod.rs",
      "src/core/matchers/code.rs"
    ]
  },
  {
    "id": "STORY-013-02",
    "epic_id": "EPIC-013",
    "epic_title": "Extended Domain Support",
    "phase": 3,
    "phase_name": "v0.3.0 - Extended Domain Support",
    "milestone": 5,
    "milestone_name": "Domain Decomposers",
    "story_title": "ML Pipeline Decomposer",
    "description": "As an ML engineer, I want pipeline decomposition, so that ML experiments are orchestrated with voting reliability.",
    "owner": "Lead Maintainer",
    "priority": "P2",
    "story_points": 8,
    "status": "pending",
    "blocked_by": ["STORY-011-05"],
    "tasks": [
      "Create src/core/decomposition/domains/ml.rs",
      "Implement MLPipelineDecomposer",
      "Define DataPrep/Config/Training/Evaluation subtasks",
      "Implement hyperparameter search as parallel composition",
      "Add NaN/infinity red-flags",
      "Write integration test"
    ],
    "acceptance_criteria": [
      "Follows DataPrep → Config → Train → Eval pattern",
      "Hyperparameter search uses Parallel",
      "Invalid metrics red-flagged",
      "Integration test passes"
    ],
    "context_files": ["src/core/decomposition/mod.rs"]
  },
  {
    "id": "STORY-013-03",
    "epic_id": "EPIC-013",
    "epic_title": "Extended Domain Support",
    "phase": 3,
    "phase_name": "v0.3.0 - Extended Domain Support",
    "milestone": 5,
    "milestone_name": "Domain Decomposers",
    "story_title": "Data Analysis Decomposer",
    "description": "As a data analyst, I want ETL decomposition, so that data pipelines are built with voting reliability.",
    "owner": "Lead Maintainer",
    "priority": "P2",
    "story_points": 8,
    "status": "pending",
    "blocked_by": ["STORY-011-05"],
    "tasks": [
      "Create src/core/decomposition/domains/data.rs",
      "Implement DataAnalysisDecomposer",
      "Define Extract/Transform/Load/Validate subtasks",
      "Implement schema inference",
      "Add type coercion red-flags",
      "Write integration test"
    ],
    "acceptance_criteria": [
      "Follows ETL pattern",
      "Schema validation works",
      "Null handling explicit",
      "Integration test passes"
    ],
    "context_files": ["src/core/decomposition/mod.rs"]
  },
  {
    "id": "STORY-013-04",
    "epic_id": "EPIC-013",
    "epic_title": "Extended Domain Support",
    "phase": 3,
    "phase_name": "v0.3.0 - Extended Domain Support",
    "milestone": 5,
    "milestone_name": "Domain Decomposers",
    "story_title": "Multi-file Orchestration",
    "description": "As a developer, I want multi-file state management, so that complex tasks spanning multiple files are handled correctly.",
    "owner": "Lead Maintainer",
    "priority": "P2",
    "story_points": 8,
    "status": "pending",
    "blocked_by": ["STORY-013-01"],
    "tasks": [
      "Create src/core/decomposition/filesystem.rs",
      "Create FileSystemState struct",
      "Implement file-level locking",
      "Add cross-file dependency tracking",
      "Implement atomic multi-file commits",
      "Write integration test"
    ],
    "acceptance_criteria": [
      "State represents multiple files",
      "No race conditions",
      "Dependencies enforced",
      "Atomic commit works"
    ],
    "context_files": ["src/core/decomposition/orchestrator.rs"]
  }
]
